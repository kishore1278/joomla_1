name: Deploy Joomla to Azure VM

on:
  push:
    branches:
      - main # Adjust the branch as needed

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Check out code
      uses: actions/checkout@v2

    - name: Install unzip
      run: sudo apt-get update && sudo apt-get install unzip -y

    - name: Download Joomla
      run: |
        wget https://github.com/joomla/joomla-cms/archive/refs/tags/${{ env.LATEST_VERSION }}.zip
        unzip ${{ env.LATEST_VERSION }}.zip
      env:
        LATEST_VERSION: "4.3.1" # Update with the desired Joomla version

    - name: Push to My Git Remote Repository
      run: |
        git config --global user.email "yuvadonadi17@.com"
        git config --global user.name "kishore1278"
        git add .
        git commit -m "Add Joomla files version ${LATEST_VERSION}"
        git push origin master # Replace 'main' with your desired branch name
